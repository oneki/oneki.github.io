---
id: use-notifications
title: useNotifications
sidebar_label: useNotifications
---
import useBaseUrl from '@docusaurus/useBaseUrl';

```javascript
const notifications = useNotifications(topic)
```
The goal of ***useNotifications*** is to listen on a topic that contains notifications.<br/>
The notifications returned by the hook are added to the local state of the component. Therefore, as soon as the topic is updated, the component does a re-render. 

> Oneki.js provides a default service to send notifications, but not a default widget to handle them. You have to provide it

### Architecture
***useNotificationService*** is a producer service. The notifications produced by ***useNotificationService*** are consumed by ***useNotifications*** as described on the figure below

<img alt="Notification architecture" src={useBaseUrl('img/notification_service.svg')} />;

### Parameters
#### Inputs
```javascript
// topic is a entry in the Redux state, stored under "notification.(topic)"
// E.g: if topic=error, then the entry in Redux state is: notification.error
// the value of notification.error is an array of notifications
topic: string
```
#### Outputs
```javascript
// notifications is an array of notification
notifications: [{
  topic: string, // the topic to use to send the notification. If not present, topic=default
  id: string, // Unique ID of the notification. This id is used later on to remove the notification from the Redux state. If no ID is provided, the service will autogenerated one.
  ttl: number, // Time to leave of the notification in milliseconds. Default value=0 (means no expiration)
  persist: boolean // A flag to indicate if the notification should survive after a route change. Default value=true
  payload: object // The payload of the notification.
}]
```
## Configuration
A topic can be configured via settings.js. The configuration is detailled on this page.

## Examples
### Minimal example
```jsx
import { useNotifications, useNotificationService } from "onekijs";
import React, { useCallback } from "react";

export default () => {
  // inject the central notificationService
  const notificationService = useNotificationService();

  // Function to send a notification on the topic referenced by the attribute "type"
  const sendNotification = useCallback(
    (type, msg) => {
      notificationService.send({
        topic: type,
        payload: {
          message: msg
        }
      });
    },
    [notificationService]
  );

  return (
    <div>
      <button onClick={() => sendNotification("error", "This is an error message")}>
        Send an error notification
      </button>
      |
      <button onClick={() => sendNotification("success", "This is a sucess message")}>
        Send a success notification
      </button>
      <SimpleNotificationWidget />
    </div>
  );
};

// Very simple Notification Widget
// Normally, this widget is central to the application (i.e: directly under <App/>)
const SimpleNotificationWidget = () => {
  const errors = useNotifications("error");
  const successes = useNotifications("success");

  return (
    <>
      <div>
        {errors.map((notification, index) => (
          <div style={{ backgroundColor: "red" }}>
            {notification.payload.message}
          </div>
        ))}
        {successes.map((notification, index) => (
          <div style={{ backgroundColor: "green" }}>
            {notification.payload.message}
          </div>
        ))}
      </div>
    </>
  );
};
```