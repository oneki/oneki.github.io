---
id: use-notification-service
title: useNotificationService
sidebar_label: useNotificationService
---
import useBaseUrl from '@docusaurus/useBaseUrl';

```javascript
const notificationService = useNotificationService();
```
The goal of ***useNotificationService*** is to provide a central service to send notification.<br/>
The notificationService is a singleton and is created the first time ***useNotificationService*** is called.
> Oneki.js provides a default notificationService. You can redine it by injecting your own notificationService (see advanced topics)

### Architecture
***useNotificationService*** is a producer service. The notifications produced by ***useNotificationService*** are consumed by ***useNotifications*** as described on the figure below

<img alt="Notification architecture" src={useBaseUrl('img/notification_service.svg')} />;

### Parameters
#### Inputs
There is no input.
#### Outputs
```javascript
// A central notification service
notificationService: {

  send: function(notification), // the main method to send a notification
  add: function(notification), // method to update the Redux state (for internal usage normally)
  remove: function(id), // method to remove a notification for the Redux state
  error: function(notification), // alias of method 'send' with hardcoded topic=error
  success: function(notification), // alias of method 'send' with hardcoded topic=success
  warning: function(notification), // alias of method 'send' with hardcoded topic=warning
  info: function(notification) // alias of method 'send' with hardcoded topic=info

}
```
**Notification** is an object with the following attributes
```javascript
// any of the attributes below are optional
notification: {

  topic: string, // the topic to use to send the notification. If not present, topic=default
  id: string, // Unique ID of the notification. This id is used later on to remove the notification from the Redux state. If no ID is provided, the service will autogenerated one.
  ttl: number, // Time to leave of the notification in milliseconds. Default value=0 (means no expiration)
  persist: boolean // A flag to indicate if the notification should survive after a route change. Default value=true
  payload: object // The payload of the notification.

}
```
## Configuration
A topic can be configured via settings.js. The configuration is detailled on this page.

## Examples
### Minimal example
```jsx
import { useNotifications, useNotificationService } from "onekijs";
import React, { useCallback } from "react";

export default () => {
  // inject the central notificationService
  const notificationService = useNotificationService();

  // Function to send a notification on the topic referenced by the attribute "type"
  const sendNotification = useCallback(
    (type, msg) => {
      notificationService.send({
        topic: type,
        payload: {
          message: msg
        }
      });
    },
    [notificationService]
  );

  return (
    <div>
      <button onClick={() => sendNotification("error", "This is an error message")}>
        Send an error notification
      </button>
      |
      <button onClick={() => sendNotification("success", "This is a sucess message")}>
        Send a success notification
      </button>
      <SimpleNotificationWidget />
    </div>
  );
};

// Very simple Notification Widget
// Normally, this widget is central to the application (i.e: directly under <App/>)
const SimpleNotificationWidget = () => {
  const errors = useNotifications("error");
  const successes = useNotifications("success");

  return (
    <>
      <div>
        {errors.map((notification, index) => (
          <div style={{ backgroundColor: "red" }}>
            {notification.payload.message}
          </div>
        ))}
        {successes.map((notification, index) => (
          <div style={{ backgroundColor: "green" }}>
            {notification.payload.message}
          </div>
        ))}
      </div>
    </>
  );
};
```