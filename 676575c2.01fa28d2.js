(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{140:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),u=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},d=function(e){var t=u(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},p=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=u(n),p=r,m=d["".concat(o,".").concat(p)]||d[p]||b[p]||i;return n?a.a.createElement(m,c(c({ref:t},l),{},{components:n})):a.a.createElement(m,c({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,o[1]=c;for(var l=2;l<i;l++)o[l]=n[l];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},141:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.a=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}},142:function(e,t,n){"use strict";var r=n(0),a=n(143);t.a=function(){var e=Object(r.useContext)(a.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},143:function(e,t,n){"use strict";var r=n(0),a=Object(r.createContext)(void 0);t.a=a},144:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){return a.a.createElement("div",null,e.children)}},145:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(142),o=n(141),c=n(48),s=n.n(c),l=37,u=39;t.a=function(e){var t=e.block,n=e.children,c=e.defaultValue,d=e.values,b=e.groupId,p=e.className,m=Object(i.a)(),v=m.tabGroupChoices,f=m.setTabGroupChoices,h=Object(r.useState)(c),g=h[0],O=h[1],j=Object(r.useState)(!1),w=j[0],y=j[1];if(null!=b){var N=v[b];null!=N&&N!==g&&d.some((function(e){return e.value===N}))&&O(N)}var x=function(e){O(e),null!=b&&f(b,e)},C=[],E=function(e){e.metaKey||e.altKey||e.ctrlKey||y(!0)},k=function(){y(!1)};return Object(r.useEffect)((function(){return window.addEventListener("keydown",E),window.addEventListener("mousedown",k),function(){window.removeEventListener("keydown",E),window.removeEventListener("mousedown",k)}}),[]),a.a.createElement("div",null,a.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(o.a)("tabs",{"tabs--block":t},p)},d.map((function(e){var t=e.value,n=e.label;return a.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":g===t,className:Object(o.a)("tabs__item",s.a.tabItem,{"tabs__item--active":g===t}),style:w?{}:{outline:"none"},key:t,ref:function(e){return C.push(e)},onKeyDown:function(e){!function(e,t,n){switch(n.keyCode){case u:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case l:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(C,e.target,e),E(e)},onFocus:function(){return x(t)},onClick:function(){x(t),y(!1)},onPointerDown:function(){return y(!1)}},n)}))),a.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},r.Children.toArray(n).filter((function(e){return e.props.value===g}))[0]))}},146:function(e,t,n){"use strict";var r=n(0),a=n(20);t.a=function(){var e=Object(r.useContext)(a.a);if(null===e)throw new Error("Docusaurus context not provided");return e}},147:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(146),a=n(148);function i(){var e=Object(r.a)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,i=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,r){var i=void 0===r?{}:r,o=i.forcePrependBaseUrl,c=void 0!==o&&o,s=i.absolute,l=void 0!==s&&s;if(!n)return n;if(n.startsWith("#"))return n;if(Object(a.b)(n))return n;if(c)return t+n;var u=n.startsWith(t)?n:t+n.replace(/^\//,"");return l?e+u:u}(i,n,e,t)}}}function o(e,t){return void 0===t&&(t={}),(0,i().withBaseUrl)(e,t)}},148:function(e,t,n){"use strict";function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function a(e){return void 0!==e&&!r(e)}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}))},149:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.name,n=e.height,r=void 0===n?500:n,i=e.modules,o=e.branch,c=void 0===o?"master":o,s=e.type,l=void 0===s?"example":s,u=e.view,d="https://codesandbox.io/embed/github/oneki/onekijs/tree/"+c+"/"+l+"/"+t+"?codemirror=1&fontsize=14&theme=dark&view="+(void 0===u?"editor":u);i&&(d+="&module=",i.forEach((function(e,t){t>0&&(d+=","),d+=e})));var b="onekijs-"+t.split("/").join("-");return a.a.createElement("iframe",{src:d,style:{width:"100%",height:r+"px",border:0,bordeRadius:"4px",overflow:"hidden"},title:b,allow:"geolocation; microphone; camera; midi; accelerometer; gyroscope; payment; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"})}},87:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return d}));var r=n(1),a=n(6),i=(n(0),n(140)),o=(n(147),n(145),n(144),n(149)),c={id:"service",title:"Adding a service",sidebar_label:"Adding a service"},s={unversionedId:"overview/getting-started/service",id:"overview/getting-started/service",isDocsHomePage:!1,title:"Adding a service",description:"This step consists in creating its own service.",source:"@site/docs/overview/getting-started/011_service.md",slug:"/overview/getting-started/service",permalink:"/docs/overview/getting-started/service",editUrl:"https://github.com/oneki/oneki.github.io/edit/source/docs/overview/getting-started/011_service.md",version:"current",sidebar_label:"Adding a service",sidebar:"someSidebar",previous:{title:"Using form for user input",permalink:"/docs/overview/getting-started/form"},next:{title:"Application",permalink:"/docs/overview/app"}},l=[{value:"Final result",id:"final-result",children:[]},{value:"Creating a service",id:"creating-a-service",children:[]}],u={rightToc:l};function d(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"This step consists in creating its own service."),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"The topic on this page is intended for advanced use cases.",Object(i.b)("br",null),"\nYou will rarely need to develop a service by yourself"))),Object(i.b)("p",null,"Almost all things provided by Oneki.js are based on services.",Object(i.b)("br",null),"\nThe role of a service is to mutate a state. This state can be "),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'a component state. In this case, the service is called a "local services"',Object(i.b)("br",null),"\nExample of hooks exposing a local service: ",Object(i.b)("inlineCode",{parentName:"li"},"useGet"),", ",Object(i.b)("inlineCode",{parentName:"li"},"usePost"),", ..."),Object(i.b)("li",{parentName:"ul"},"the global redux state. In this case, the service is called a global service.",Object(i.b)("br",null),"\nExample of hooks exposing global services: ",Object(i.b)("inlineCode",{parentName:"li"},"useNotificationService"),", ",Object(i.b)("inlineCode",{parentName:"li"},"useSecurityContext"))),Object(i.b)("p",null,"The service mutates the state following the best practices (immutability, action, reducers, ...)",Object(i.b)("br",null),"\nTo mutate the state, it exposes two types of methods:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"Reducer methods")," (annoted with @reducer). Only these methods can mutate the state."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"Saga methods")," (annotate with @saga). These methods can orchestrate calls to reducer methods and are used to handle complex scenario like:",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"Calling a reducer to update a loading variable"),Object(i.b)("li",{parentName:"ul"},"Let React rendering the component to display the loading indicator"),Object(i.b)("li",{parentName:"ul"},"Perform a AJAX request asynchronously"),Object(i.b)("li",{parentName:"ul"},"Store the result in the state (by calling another reducer method)"),Object(i.b)("li",{parentName:"ul"},"Calling the first reducer to update the loading variable")))),Object(i.b)("h2",{id:"final-result"},"Final result"),Object(i.b)("p",null,"The result of this step is the following:"),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"New in this step")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"The login page now validates that the username and password are filled in"),Object(i.b)("p",{parentName:"div"},"A new page is added to sign up. The form on the sign up page verifies asynchronously if the username is available or not",Object(i.b)("br",null),"\nCertain elements of the form are displayed or not depending on the value of a field"))),Object(i.b)(o.a,{name:"step09-form",type:"getting-started",view:"preview",height:"600",modules:["/src/index.tsx","/src/pages/products/index.tsx"],mdxType:"Sandbox"}),Object(i.b)("h2",{id:"creating-a-service"},"Creating a service"),Object(i.b)("p",null,"To illustrate how to create a service, we are going to rebuild the equivalent of ",Object(i.b)("inlineCode",{parentName:"p"},"useGet")))}d.isMDXComponent=!0}}]);