"use strict";(self.webpackChunkonekijs_website=self.webpackChunkonekijs_website||[]).push([[97468],{34673:function(e,t,a){a.d(t,{Z:function(){return f}});var n=a(87462),r=a(67294),l=a.n(r),o=a(86010),i=a(63366),s=a(72389),p=a(86043),u="details_lb9f",m="isBrowser_bmU9",d="collapsibleContent_i85q",c=["summary","children"];function k(e){return!!e&&("SUMMARY"===e.tagName||k(e.parentElement))}function g(e,t){return!!e&&(e===t||g(e.parentElement,t))}function h(e){var t=e.summary,a=e.children,h=(0,i.Z)(e,c),b=(0,s.Z)(),f=(0,r.useRef)(null),N=(0,p.u)({initialState:!h.open}),v=N.collapsed,y=N.setCollapsed,x=(0,r.useState)(h.open),w=x[0],A=x[1],E=l().isValidElement(t)?t:l().createElement("summary",null,null!=t?t:"Details");return l().createElement("details",(0,n.Z)({},h,{ref:f,open:w,"data-collapsed":v,className:(0,o.Z)(u,b&&m,h.className),onMouseDown:function(e){k(e.target)&&e.detail>1&&e.preventDefault()},onClick:function(e){e.stopPropagation();var t=e.target;k(t)&&g(t,f.current)&&(e.preventDefault(),v?(y(!1),A(!0)):y(!0))}}),E,l().createElement(p.z,{lazy:!1,collapsed:v,disableSSRStyle:!0,onCollapseTransitionEnd:function(e){y(e),A(!e)}},l().createElement("div",{className:d},a)))}var b="details_b_Ee";function f(e){var t=Object.assign({},e);return l().createElement(h,(0,n.Z)({},t,{className:(0,o.Z)("alert alert--info",b,t.className)}))}},85162:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(67294),r=a.n(n),l=a(86010),o="tabItem_Ymn6";function i(e){var t=e.children,a=e.hidden,n=e.className;return r().createElement("div",{role:"tabpanel",className:(0,l.Z)(o,n),hidden:a},t)}},74866:function(e,t,a){a.d(t,{Z:function(){return w}});var n=a(87462),r=a(67294),l=a.n(r),o=a(86010),i=a(12466),s=a(45315),p=a(91980),u=a(67392),m=a(50012);function d(e){return function(e){var t,a;return null!=(t=null==(a=l().Children.map(e,(function(e){if(!e||(0,r.isValidElement)(e)&&(t=e.props)&&"object"==typeof t&&"value"in t)return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:a.filter(Boolean))?t:[]}(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}function c(e){var t=e.values,a=e.children;return(0,r.useMemo)((function(){var e=null!=t?t:d(a);return function(e){var t=(0,u.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,a])}function k(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function g(e){var t=e.queryString,a=void 0!==t&&t,n=e.groupId,l=(0,s.k6)(),o=function(e){var t=e.queryString,a=void 0!==t&&t,n=e.groupId;if("string"==typeof a)return a;if(!1===a)return null;if(!0===a&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:a,groupId:n});return[(0,p._X)(o),(0,r.useCallback)((function(e){if(o){var t=new URLSearchParams(l.location.search);t.set(o,e),l.replace(Object.assign({},l.location,{search:t.toString()}))}}),[o,l])]}function h(e){var t,a,n,l,o=e.defaultValue,i=e.queryString,s=void 0!==i&&i,p=e.groupId,u=c(e),d=(0,r.useState)((function(){return function(e){var t,a=e.defaultValue,n=e.tabValues;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!k({value:a,tabValues:n}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+a+'" but none of its children has the corresponding value. Available values are: '+n.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return a}var r=null!=(t=n.find((function(e){return e.default})))?t:n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:o,tabValues:u})})),h=d[0],b=d[1],f=g({queryString:s,groupId:p}),N=f[0],v=f[1],y=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:p}.groupId),a=(0,m.Nk)(t),n=a[0],l=a[1],[n,(0,r.useCallback)((function(e){t&&l.set(e)}),[t,l])]),x=y[0],w=y[1],A=function(){var e=null!=N?N:x;return k({value:e,tabValues:u})?e:null}();return(0,r.useLayoutEffect)((function(){A&&b(A)}),[A]),{selectedValue:h,selectValue:(0,r.useCallback)((function(e){if(!k({value:e,tabValues:u}))throw new Error("Can't select invalid tab value="+e);b(e),v(e),w(e)}),[v,w,u]),tabValues:u}}var b=a(72389),f="tabList__CuJ",N="tabItem_LNqP";function v(e){var t=e.className,a=e.block,r=e.selectedValue,s=e.selectValue,p=e.tabValues,u=[],m=(0,i.o5)().blockElementScrollPositionUntilNextRender,d=function(e){var t=e.currentTarget,a=u.indexOf(t),n=p[a].value;n!==r&&(m(t),s(n))},c=function(e){var t,a=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var n,r=u.indexOf(e.currentTarget)+1;a=null!=(n=u[r])?n:u[0];break;case"ArrowLeft":var l,o=u.indexOf(e.currentTarget)-1;a=null!=(l=u[o])?l:u[u.length-1]}null==(t=a)||t.focus()};return l().createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},t)},p.map((function(e){var t=e.value,a=e.label,i=e.attributes;return l().createElement("li",(0,n.Z)({role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,key:t,ref:function(e){return u.push(e)},onKeyDown:c,onClick:d},i,{className:(0,o.Z)("tabs__item",N,null==i?void 0:i.className,{"tabs__item--active":r===t})}),null!=a?a:t)})))}function y(e){var t=e.lazy,a=e.children,n=e.selectedValue,o=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){var i=o.find((function(e){return e.props.value===n}));return i?(0,r.cloneElement)(i,{className:"margin-top--md"}):null}return l().createElement("div",{className:"margin-top--md"},o.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n})})))}function x(e){var t=h(e);return l().createElement("div",{className:(0,o.Z)("tabs-container",f)},l().createElement(v,(0,n.Z)({},e,t)),l().createElement(y,(0,n.Z)({},e,t)))}function w(e){var t=(0,b.Z)();return l().createElement(x,(0,n.Z)({key:String(t)},e))}},47778:function(e,t,a){a(67294),a(32779),a(34673),a(95665)},64094:function(e,t,a){var n=a(67294),r=a.n(n),l=a(74866);a(85162);t.Z=function(e){var t=e.children;return r().createElement(l.Z,{groupId:"application-types",defaultValue:"cra",values:[{label:"Vite App",value:"cra"},{label:"Nextjs App",value:"next"}]},t)}},20819:function(e,t,a){a.d(t,{J5:function(){return c},b4:function(){return u}});var n=a(67294),r=a.n(n),l=a(64094),o=a(85162),i=a(95665),s=a.n(i),p=a(74866),u=function(e){var t=e.path,a=e.craPath,n=e.nextPath,i=e.branch,p=void 0===i?"master":i;return r().createElement(l.Z,null,r().createElement(o.Z,{value:"cra"},r().createElement(s(),{language:"tsx"},"https://github.com/oneki/onekijs/blob/"+p+"/getting-started/cra/"+(a||t)+"\n")),r().createElement(o.Z,{value:"next"},r().createElement(s(),{language:"tsx"},"https://github.com/oneki/onekijs/blob/"+p+"/getting-started/next/"+(n||t)+"\n")))},m=function(e){var t=e.path,a=e.branch,n=void 0===a?"master":a,l=t;return t.startsWith("http")||(l="https://github.com/oneki/onekijs/blob/"+n+"/examples/cra-examples/src/"+t),r().createElement(s(),{language:"tsx"},l+"\n")},d=function(e){var t=e.path,a=e.height,n=void 0===a?500:a,l=t;return t.startsWith("http")||(l="https://examples.oneki.net/"+t),r().createElement("iframe",{src:l,style:{width:"100%",height:n+"px",border:"10px solid #EEE",bordeRadius:"4px",overflow:"hidden"},title:"Example preview",allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts allow-top-navigation"})},c=function(e){var t=e.values,a=e.branch,n=void 0===a?"master":a,l=e.preview,i=t.map((function(e){return{label:e.label,value:e.label}}));l&&i.push({label:"\ud83d\udc41 Preview",value:"__preview__"});var s=t.map((function(e){return r().createElement(o.Z,{value:e.label},r().createElement(m,{path:e.path,branch:n}))}));return l&&s.push(r().createElement(o.Z,{value:"__preview__"},r().createElement(d,{path:l.path,height:l.height}))),console.log(i),r().createElement(p.Z,{groupId:"example-types",defaultValue:t[0].label,values:i},s)}},32779:function(e,t,a){a.d(t,{YK:function(){return s},g0:function(){return p}});var n=a(67294),r=a.n(n),l=a(64094),o=a(85162),i=function(e){var t=e.name,a=e.height,n=void 0===a?500:a,l=e.modules,o=e.branch,i=void 0===o?"master":o,s=e.type,p=void 0===s?"examples":s,u=e.view,m=void 0===u?"editor":u,d="https://oneki-gs-vite-"+t.split("-")[0]+".surge.sh/",c="https://codesandbox.io/p/sandbox/github/oneki/onekijs/tree/"+i+"/"+p+"/"+t+"?codemirror=1&fontsize=14&theme=dark&view="+m;l&&(c+="&module=",l.forEach((function(e,t){t>0&&(c+=","),c+=e})));var k="onekijs-"+t.split("/").join("-"),g="https://github.com/oneki/onekijs/tree/"+i+"/"+p+"/"+t;return r().createElement(r().Fragment,null,r().createElement("iframe",{src:d,style:{width:"100%",height:n+"px",border:"10px solid #EEE",bordeRadius:"4px",overflow:"hidden"},title:k,allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"}),r().createElement("div",{style:{textAlign:"center"}},r().createElement("a",{href:c,target:"_blank"},"Open in CodeSandbox")," | ",r().createElement("a",{href:g,target:"_blank"},"View code on GitHub")))},s=function(e){var t=e.name;return r().createElement("div",{style:{textAlign:"right"}},r().createElement("a",{href:"https://codesandbox.io/p/sandbox/github/oneki/onekijs/tree/master/"+t,target:"_blank",style:{display:"inline-flex",alignItems:"center",height:"32px",padding:"0px 12px",fontSize:"13px",fontWeight:500,color:"rgb(255, 255, 255)",backgroundColor:"#2196f3",borderRadius:"4px",textDecoration:"none",cursor:"pointer",marginBottom:"2px"}},"Open in Codesandbox"))},p=function(e){var t=e.name,a=e.modules,n=e.craName,s=e.craModules,p=e.nextName,u=e.nextModules,m=e.height,d=void 0===m?600:m,c=e.branch,k=void 0===c?"master":c;return r().createElement(l.Z,null,r().createElement(o.Z,{value:"cra"},r().createElement(i,{name:n||t,type:"getting-started/cra",view:"preview",branch:k,height:d,modules:s||a})),r().createElement(o.Z,{value:"next"},r().createElement(i,{name:p||t,type:"getting-started/next",view:"preview",branch:k,height:d,modules:u||a})))};t.ZP=i},38067:function(e,t,a){a.r(t),a.d(t,{assets:function(){return m},contentTitle:function(){return p},default:function(){return k},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return d}});var n=a(87462),r=a(63366),l=(a(67294),a(3905)),o=a(34673),i=["components"],s={id:"App",title:"App",sidebar_label:"App"},p=void 0,u={unversionedId:"framework-api/application/components/App",id:"framework-api/application/components/App",title:"App",description:"`` is the main component that bootstraps the Oneki.js framework_** on top of Create React App_",source:"@site/docs/framework-api/application/components/App.md",sourceDirName:"framework-api/application/components",slug:"/framework-api/application/components/App",permalink:"/docs/framework-api/application/components/App",draft:!1,editUrl:"https://github.com/oneki/oneki.github.io/edit/source/docs/framework-api/application/components/App.md",tags:[],version:"current",frontMatter:{id:"App",title:"App",sidebar_label:"App"},sidebar:"someSidebar",previous:{title:"xhr",permalink:"/docs/api/functions/xhr"},next:{title:"AsyncBindService",permalink:"/docs/framework-api/classes/AsyncBindService"}},m={},d=[{value:"Custom redux store",id:"custom-redux-store",level:4},{value:"Properties",id:"properties",level:3}],c={toc:d};function k(e){var t=e.components,a=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"<App/>")," is the main component that bootstraps the ",(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},"Oneki.js framework"))," on top of ",(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},"Create React App"))),(0,l.kt)("p",null,"This component is generally the external component of an application and is responsible for:  "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"creating a Redux store:  ",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"If the ",(0,l.kt)("inlineCode",{parentName:"li"},"store")," property is present, ",(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("em",{parentName:"strong"},"App"))," doesn't create a Redux store but uses the one referenced by the property.  "),(0,l.kt)("li",{parentName:"ul"},"Otherwise, ",(0,l.kt)("strong",{parentName:"li"},"<","App/",">")," creates the Redux store. The initial state of the store is the object referenced by the property ",(0,l.kt)("inlineCode",{parentName:"li"},"initialState"),".  "))),(0,l.kt)("li",{parentName:"ul"},"creating a React Router. By default, it creates a ",(0,l.kt)("strong",{parentName:"li"},"BrowserRouter")," that can be changed / configured via the ",(0,l.kt)("strong",{parentName:"li"},"settings.ts")," file  "),(0,l.kt)("li",{parentName:"ul"},"creating and injecting global ",(0,l.kt)("strong",{parentName:"li"},"services")," in the Redux store  "),(0,l.kt)("li",{parentName:"ul"},"creating a context that contains three elements:  ",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"router"),": accessible via useRouter()  "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"settings"),": accessible via useSettings()  "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"redux store"),": accessible via useStore()")))),(0,l.kt)("h4",{id:"custom-redux-store"},"Custom redux store"),(0,l.kt)("p",null,"A custom Redux store can be created by calling the helper ",(0,l.kt)("inlineCode",{parentName:"p"},"createReduxStore")," from Oneki.js"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const store = createReduxStore((initialState = {}), (middlewares = []));\n")),(0,l.kt)("p",null,"This helper expects an initial state and an array of Redux middlewares."),(0,l.kt)("h3",{id:"properties"},"Properties"),(0,l.kt)("font",{size:"2"},(0,l.kt)("i",null,"(Mandatory properties are in bold)")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Properties"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"settings"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/interfaces/AppSettings"},"AppSettings")," ","|"," Promise<",(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/interfaces/AppSettings"},"AppSettings"),">"),(0,l.kt)("td",{parentName:"tr",align:null},"Settings is a object usually defined in the file ",(0,l.kt)("code",null,"src/settings.ts"),(0,l.kt)("br",null),"Data defined in settings.ts is available throughout the application and contains configuration data.",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("a",{parentName:"strong",href:"/docs/framework/configuration/introduction"},"More info here")))))),(0,l.kt)(o.Z,{summary:(0,l.kt)("summary",null,(0,l.kt)("b",null,"Additional properties for advanced use cases")),mdxType:"Details"},(0,l.kt)("div",null,(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Properties"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ErrorBoundaryComponent"),(0,l.kt)("td",{parentName:"tr",align:null},"ComponentType<",(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/types/ErrorBoundaryComponentProps"},"ErrorBoundaryComponentProps"),">"),(0,l.kt)("td",{parentName:"tr",align:null},"The component displayed when an error occurs during the rendering phase",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to:")," no error boundary component")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"i18nNs"),(0,l.kt)("td",{parentName:"tr",align:null},"string[]"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("a",{parentName:"strong",href:"/docs/framework/i18n/introduction"},"More info here")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to:")," ",(0,l.kt)("code",null,"undefined"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"initialLocale"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"Property to indicate the language to be used by default",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to:")," ",(0,l.kt)("code",null,"undefined"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"initialState"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/interfaces/AnyState"},"AnyState")," ","|"," Promise<",(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/interfaces/AnyState"},"AnyState"),">"),(0,l.kt)("td",{parentName:"tr",align:null},"The initial state passed to the Redux store when it is created",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to:")," ",(0,l.kt)("code",null,"undefined"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"LoadingComponent"),(0,l.kt)("td",{parentName:"tr",align:null},"ElementType"),(0,l.kt)("td",{parentName:"tr",align:null},"A component expected by ",(0,l.kt)("code",null,"<Suspense",">")," (used to display a loading indicator)",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to:")," ",(0,l.kt)("code",null,"<DefaultLoadingComponent /",">"),' that displays "Loading..."')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"services"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/types/Class"},"Class"),"<",(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/classes/DefaultService"},"default"),"<",(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/interfaces/AnyState"},"AnyState"),">",">","[]"),(0,l.kt)("td",{parentName:"tr",align:null},"A list of services that will be available globally in the application.",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("a",{parentName:"strong",href:"/docs/framework/service/introduction"},"More info here")))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"store"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/interfaces/AppStore"},"AppStore"),"<any, AnyAction",">"),(0,l.kt)("td",{parentName:"tr",align:null},"A standard Redux store, ",(0,l.kt)("strong",{parentName:"td"},"but created via the helper")," ",(0,l.kt)("code",null,"createReduxStore")," from onekijs",(0,l.kt)("br",null),"The store must be created via this helper so onekijs can control it",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to:")," A store created by ",(0,l.kt)("code",null,"<App/",">")," (recommended)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"translations"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/interfaces/AnonymousObject"},"AnonymousObject"),"<",(0,l.kt)("a",{parentName:"td",href:"/docs/framework-api/interfaces/AnonymousObject"},"AnonymousObject"),"<string",">",">"),(0,l.kt)("td",{parentName:"tr",align:null},"An object containing the translations",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("a",{parentName:"strong",href:"/docs/framework/i18n/introduction"},"More info here")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to:")," ",(0,l.kt)("code",null,"undefined"))))))))}k.isMDXComponent=!0},53965:function(e,t,a){a.r(t),a.d(t,{assets:function(){return h},contentTitle:function(){return k},default:function(){return N},frontMatter:function(){return c},metadata:function(){return g},toc:function(){return b}});var n=a(87462),r=a(63366),l=(a(67294),a(3905)),o=(a(44996),a(64094)),i=a(85162),s=a(32779),p=(a(47778),a(20819)),u=a(34673),m=a(38067),d=["components"],c={id:"app",title:"Application",sidebar_label:"Application"},k=void 0,g={unversionedId:"framework/application/app",id:"framework/application/app",title:"Application",description:"Oneki.js provides a component to wrap the entire application. This component starts the framework and is usually the most external component of an application.",source:"@site/docs/framework/application/040-app.md",sourceDirName:"framework/application",slug:"/framework/application/app",permalink:"/docs/framework/application/app",draft:!1,editUrl:"https://github.com/oneki/oneki.github.io/edit/source/docs/framework/application/040-app.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{id:"app",title:"Application",sidebar_label:"Application"},sidebar:"someSidebar",previous:{title:"Introduction",permalink:"/docs/framework/introduction"},next:{title:"Introduction",permalink:"/docs/framework/configuration/introduction"}},h={},b=[{value:"Examples",id:"examples",level:2},{value:"Documentation",id:"documentation",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Custom redux store",id:"custom-redux-store",level:4},{value:"Examples",id:"examples-1",level:2},{value:"Minimal example",id:"minimal-example",level:4},{value:"Example with settings, store and global services",id:"example-with-settings-store-and-global-services",level:4}],f={toc:b};function N(e){var t=e.components,a=(0,r.Z)(e,d);return(0,l.kt)("wrapper",(0,n.Z)({},f,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Oneki.js")," provides a component to wrap the entire application. This component starts the framework and is usually the most external component of an application."),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"The ",(0,l.kt)("inlineCode",{parentName:"p"},"<App/>")," component is not the same for applications built from ",(0,l.kt)("strong",{parentName:"p"},"Create React App")," or ",(0,l.kt)("strong",{parentName:"p"},"Next.js"),".",(0,l.kt)("br",null),"\nSelect the correct tab to view the documentation for what you are using.")),(0,l.kt)(o.Z,{mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"cra",mdxType:"TabItem"},(0,l.kt)("h2",{id:"examples"},"Examples"),(0,l.kt)(u.Z,{summary:(0,l.kt)("summary",null,"Minimal example"),mdxType:"Details"},"The minimum example consists of wrapping the entire application with ",(0,l.kt)("code",null,"<App/>")," ",(0,l.kt)("br",null),(0,l.kt)("code",null,"<App/>"),"  bootstraps a router (React router) and a store (Redux)",(0,l.kt)(p.J5,{values:[{label:"index.tsx",path:"https://github.com/oneki/onekijs/blob/master/getting-started/cra/step02-navigation/src/index.tsx"},{label:"router.tsx",path:"https://github.com/oneki/onekijs/blob/master/getting-started/cra/step02-navigation/src/pages/_router.tsx"}],preview:{path:"https://oneki-gs-vite-step02.surge.sh",height:550},mdxType:"ExampleMultipleSnippet"})),(0,l.kt)(u.Z,{summary:(0,l.kt)("summary",null,"Settings"),mdxType:"Details"},"In most cases, a configuration is injected into the application. ",(0,l.kt)("br",null),"By convention, this configuration is coming from ",(0,l.kt)("code",null,"src/settings.ts"),(0,l.kt)(p.J5,{values:[{label:"index.tsx",path:"https://github.com/oneki/onekijs/blob/master/getting-started/cra/step04-authentication/src/index.tsx"},{label:"router.tsx",path:"https://github.com/oneki/onekijs/blob/master/getting-started/cra/step04-authentication/src/pages/_router.tsx"}],preview:{path:"https://oneki-gs-vite-step04.surge.sh",height:550},mdxType:"ExampleMultipleSnippet"})),(0,l.kt)(u.Z,{summary:(0,l.kt)("summary",null,"App with settings, store and global services"),mdxType:"Details"},"This example shows how to create the properties expected by ",(0,l.kt)("code",null,"<App/>"),(0,l.kt)("p",null,"  In general, only the ",(0,l.kt)("inlineCode",{parentName:"p"},"settings")," property is passed to ",(0,l.kt)("inlineCode",{parentName:"p"},"<App/>")," while the other properties (store, services, ...) are initialized by the ",(0,l.kt)("inlineCode",{parentName:"p"},"<App/>")," itself."),(0,l.kt)("p",null,"  The example below initializes an ",(0,l.kt)("inlineCode",{parentName:"p"},"<App/>")," by passing these properties:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Settings"),": An object defined in the file ",(0,l.kt)("inlineCode",{parentName:"li"},"src/settings.ts")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"A global service"),": A global service is instantied only once and accessible everywhere in the application. The role of a service is to manipulate the Redux store. Check ",(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("a",{parentName:"strong",href:"../service/introduction"},"this documentation"))," for more info.  "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"A redux store"),": Normally the redux store should not be initialized manually, but this example shows how it's possible to inject our own store")),(0,l.kt)(p.J5,{values:[{label:"index.tsx",path:"https://github.com/oneki/onekijs/blob/master/examples/cra-app-custom-store/src/index.tsx"},{label:"Main.tsx",path:"https://github.com/oneki/onekijs/blob/master/examples/cra-app-custom-store/src/Main.tsx"},{label:"LoadingService.ts",path:"https://github.com/oneki/onekijs/blob/master/examples/cra-app-custom-store/src/LoadingService.ts"}],mdxType:"ExampleMultipleSnippet"})),(0,l.kt)("h2",{id:"documentation"},"Documentation"),(0,l.kt)(m.default,{mdxType:"Api"})),(0,l.kt)(i.Z,{value:"next",mdxType:"TabItem"},(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"<NextApp/",">")," is the main component that bootstraps the ",(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},"Oneki.js framework"))," on top of ",(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},"Next.js"))),(0,l.kt)("p",null,"This component is generally the external component of an application (defined in the file ",(0,l.kt)("strong",{parentName:"p"},"_","app.js"),") and is responsible of:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"creating a Redux store:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"If the ",(0,l.kt)("inlineCode",{parentName:"li"},"store")," property is present, ",(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("em",{parentName:"strong"},"App"))," doesn't create a Redux store but uses the one referenced by the property."),(0,l.kt)("li",{parentName:"ul"},"Otherwise, ",(0,l.kt)("strong",{parentName:"li"},"<","App/",">")," creates the Redux store. The initial state of the store is the object referenced by the property ",(0,l.kt)("inlineCode",{parentName:"li"},"initialState"),"."))),(0,l.kt)("li",{parentName:"ul"},"creating and injecting global ",(0,l.kt)("strong",{parentName:"li"},"services")," in the Redux store"),(0,l.kt)("li",{parentName:"ul"},"creating a context that contains three elements:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"router"),": accessible via useRouter()"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"settings"),": accessible via useSettings()"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"redux store"),": accessible via useStore()")))),(0,l.kt)("p",null),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"<NextApp\n  settings={settings}\n  store={store}\n  initialState={initialState}\n  services={[services]}\n  LoadingComponent={LoadingComponent}\n  Component={Component}\n  pageProps={pageProps}\n/>\n")),(0,l.kt)("h3",{id:"parameters"},"Parameters"),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"Mandatory parameters are in bold")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"settings")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"../../api/interfaces/AppSettings"},"AppSettings")),(0,l.kt)("td",{parentName:"tr",align:null},"Settings is a object usually defined in the file ",(0,l.kt)("inlineCode",{parentName:"td"},"src/settings.ts"),(0,l.kt)("br",null),"Data defined in settings.ts is available throughout the application and contains configuration data.",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("a",{parentName:"strong",href:"../configuration/introduction"},"More info here")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to"),": {}")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"store")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"../../api/interfaces/AppStore"},"AppStore")),(0,l.kt)("td",{parentName:"tr",align:null},"A standard Redux store, ",(0,l.kt)("strong",{parentName:"td"},"but created via the helper")," ",(0,l.kt)("inlineCode",{parentName:"td"},"createReduxStore")," from onekijs",(0,l.kt)("br",null),"The store must be created via this helper so onekijs can control it (See below for more info)",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to"),": A store created by ",(0,l.kt)("strong",{parentName:"td"},"<NextApp/",">")," (recommended)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"initialState")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"../../api/interfaces/AnyState"},"AnyState")," ","|"," Promise<",(0,l.kt)("a",{parentName:"td",href:"../../api/interfaces/AnyState"},"AnyState"),">"),(0,l.kt)("td",{parentName:"tr",align:null},"The initial state is passed to the Redux store when it is created",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to"),": null")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"services")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"../../api/interfaces/Service"},"Service","[","]")),(0,l.kt)("td",{parentName:"tr",align:null},"A list of services that will be available globally in the application.",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("a",{parentName:"strong",href:"../service/introduction"},"More info here")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to"),": []")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"LoadingComponent")),(0,l.kt)("td",{parentName:"tr",align:null},"ElementType"),(0,l.kt)("td",{parentName:"tr",align:null},"A component expected by <Suspense",">"," (used to display a loading indicator)",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to"),": ",(0,l.kt)("a",{parentName:"td",href:"https://github.com/oneki/onekijs/blob/master/packages/onekijs-framework/src/app/DefaultLoadingComponent.tsx"},"DefaultLoadingComponent"),' that displays "Loading..."')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"initialLocale")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"Property to indicate the language to be used by default.",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to"),": null")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"translations")),(0,l.kt)("td",{parentName:"tr",align:null},"any"),(0,l.kt)("td",{parentName:"tr",align:null},"An object containing the translations.",(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("a",{parentName:"strong",href:"../i18n/introduction"},"More info here")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to"),": null")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"i18nNs")),(0,l.kt)("td",{parentName:"tr",align:null},"string[]"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},(0,l.kt)("a",{parentName:"strong",href:"../i18n/introduction"},"More info here")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to"),": null")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"ErrorBoundaryComponent")),(0,l.kt)("td",{parentName:"tr",align:null},"ComponentType <",(0,l.kt)("a",{parentName:"td",href:"../../api/types/ErrorBoundaryComponentProps"},"ErrorBoundaryComponentProps"),">"),(0,l.kt)("td",{parentName:"tr",align:null},"The component displayed when an error occurs during the rendering phase",(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("strong",{parentName:"td"},"Defaults to"),": no error boundary component")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"Component")),(0,l.kt)("td",{parentName:"tr",align:null},"ElementType"),(0,l.kt)("td",{parentName:"tr",align:null},"The Page component injected by ",(0,l.kt)("inlineCode",{parentName:"td"},"Next.js"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"pageProps")),(0,l.kt)("td",{parentName:"tr",align:null},"any"),(0,l.kt)("td",{parentName:"tr",align:null},"The Page props injected by ",(0,l.kt)("inlineCode",{parentName:"td"},"Next.js"))))),(0,l.kt)("h4",{id:"custom-redux-store"},"Custom redux store"),(0,l.kt)("p",null,"A custom Redux store is created by calling the helper createReduxStore from Oneki.js",(0,l.kt)("br",null),"\nThe helper expects an initial state and an array of Redux middlewares."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const store = createReduxStore((initialState = {}), (middlewares = []));\n")),(0,l.kt)("p",null),(0,l.kt)("p",null),(0,l.kt)("h2",{id:"examples-1"},"Examples"),(0,l.kt)("h4",{id:"minimal-example"},"Minimal example"),(0,l.kt)(s.ZP,{name:"next-app-basic",height:"500",modules:["/src/pages/_app.tsx"],mdxType:"Sandbox"}),(0,l.kt)("h4",{id:"example-with-settings-store-and-global-services"},"Example with settings, store and global services"),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"This example creates a custom global service that uses annotations.\nTo enable the support of annotations in typescript, you must install this babel plugin:"),(0,l.kt)("pre",{parentName:"admonition"},(0,l.kt)("code",{parentName:"pre"},"yarn add @babel/plugin-proposal-decorators -D\n")),(0,l.kt)("p",{parentName:"admonition"},"and add the file .babelrc at the root of the project with the following content:"),(0,l.kt)("pre",{parentName:"admonition"},(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "presets": ["next/babel"],\n  "plugins": [["@babel/plugin-proposal-decorators", { "legacy": true }]]\n}\n'))),(0,l.kt)(s.ZP,{name:"next-app-custom-store",height:"450",modules:["/src/pages/_app.tsx","/src/settings.ts","/src/modules/core/services/LoadingService.ts","/src/pages/index.tsx"],mdxType:"Sandbox"}))))}N.isMDXComponent=!0}}]);