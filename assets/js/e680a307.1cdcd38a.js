"use strict";(self.webpackChunkoneki_js=self.webpackChunkoneki_js||[]).push([[521],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return f}});var n=a(7294),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var u=r().createContext({}),c=function(e){var t=r().useContext(u),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=c(e.components);return r().createElement(u.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r().createElement(r().Fragment,{},t)}},d=r().forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(a),d=n,f=p["".concat(l,".").concat(d)]||p[d]||m[d]||o;return a?r().createElement(f,s(s({ref:t},u),{},{components:a})):r().createElement(f,s({ref:t},u))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,l=new Array(o);l[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:n,l[1]=s;for(var u=2;u<o;u++)l[u]=a[u];return r().createElement.apply(null,l)}return r().createElement.apply(null,a)}d.displayName="MDXCreateElement"},3919:function(e,t,a){function n(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!n(e)}a.d(t,{b:function(){return n},Z:function(){return r}})},4996:function(e,t,a){a.d(t,{C:function(){return o},Z:function(){return l}});var n=a(2263),r=a(3919);function o(){var e=(0,n.Z)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,a=void 0===t?"/":t,o=e.url;return{withBaseUrl:function(e,t){return function(e,t,a,n){var o=void 0===n?{}:n,l=o.forcePrependBaseUrl,s=void 0!==l&&l,i=o.absolute,u=void 0!==i&&i;if(!a)return a;if(a.startsWith("#"))return a;if((0,r.b)(a))return a;if(s)return t+a;var c=a.startsWith(t)?a:t+a.replace(/^\//,"");return u?e+c:c}(o,a,e,t)}}}function l(e,t){return void 0===t&&(t={}),(0,o().withBaseUrl)(e,t)}},8215:function(e,t,a){var n=a(7294),r=a.n(n);t.Z=function(e){var t=e.children,a=e.hidden,n=e.className;return r().createElement("div",{role:"tabpanel",hidden:a,className:n},t)}},5064:function(e,t,a){a.d(t,{Z:function(){return m}});var n=a(7294),r=a.n(n),o=a(9443);var l=function(){var e=(0,n.useContext)(o.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},s=a(6010),i="tabItem_1uMI",u="tabItemActive_2DSg";var c=37,p=39;var m=function(e){var t=e.lazy,a=e.block,o=e.defaultValue,m=e.values,d=e.groupId,f=e.className,g=l(),b=g.tabGroupChoices,h=g.setTabGroupChoices,k=(0,n.useState)(o),v=k[0],y=k[1],N=n.Children.toArray(e.children),w=[];if(null!=d){var O=b[d];null!=O&&O!==v&&m.some((function(e){return e.value===O}))&&y(O)}var j=function(e){var t=e.currentTarget,a=w.indexOf(t),n=m[a].value;y(n),null!=d&&(h(d,n),setTimeout((function(){var e,a,n,r,o,l,s,i;(e=t.getBoundingClientRect(),a=e.top,n=e.left,r=e.bottom,o=e.right,l=window,s=l.innerHeight,i=l.innerWidth,a>=0&&o<=i&&r<=s&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(u),setTimeout((function(){return t.classList.remove(u)}),2e3))}),150))},x=function(e){var t,a;switch(e.keyCode){case p:var n=w.indexOf(e.target)+1;a=w[n]||w[0];break;case c:var r=w.indexOf(e.target)-1;a=w[r]||w[w.length-1]}null==(t=a)||t.focus()};return r().createElement("div",{className:"tabs-container"},r().createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":a},f)},m.map((function(e){var t=e.value,a=e.label;return r().createElement("li",{role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,className:(0,s.Z)("tabs__item",i,{"tabs__item--active":v===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:x,onFocus:j,onClick:j},a)}))),t?(0,n.cloneElement)(N.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):r().createElement("div",{className:"margin-vert--md"},N.map((function(e,t){return(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==v})}))))}},9443:function(e,t,a){var n=a(7294),r=(0,n.createContext)(void 0);t.Z=r},2931:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return i},metadata:function(){return u},toc:function(){return c},default:function(){return m}});var n=a(3117),r=a(102),o=(a(7294),a(3905)),l=(a(4996),a(5064),a(8215),["components"]),s={id:"global-state",title:"Global state",sidebar_label:"Global state"},i=void 0,u={unversionedId:"framework/state-management/global-state",id:"framework/state-management/global-state",isDocsHomePage:!1,title:"Global state",description:"If several components react on a same data, it's a good practice to use a global state to store it. The most popular library to handle this kind of state is Redux",source:"@site/docs/framework/state-management/30-global-state.md",sourceDirName:"framework/state-management",slug:"/framework/state-management/global-state",permalink:"/docs/framework/state-management/global-state",editUrl:"https://github.com/oneki/oneki.github.io/edit/source/docs/framework/state-management/30-global-state.md",version:"current",sidebarPosition:30,frontMatter:{id:"global-state",title:"Global state",sidebar_label:"Global state"},sidebar:"someSidebar",previous:{title:"Introduction",permalink:"/docs/framework/state-management/introduction"},next:{title:"Local state",permalink:"/docs/framework/state-management/local-state"}},c=[{value:"useGlobalProp",id:"useglobalprop",children:[{value:"Parameters",id:"parameters",children:[]}]},{value:"useGlobalState",id:"useglobalstate",children:[{value:"Parameters",id:"parameters-1",children:[]}]},{value:"useGlobalStateService",id:"useglobalstateservice",children:[]},{value:"Examples",id:"examples",children:[]}],p={toc:c};function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"If several components react on a same data, it's a good practice to use a global state to store it. The most popular library to handle this kind of state is ",(0,o.kt)("strong",{parentName:"p"},"Redux")),(0,o.kt)("p",null,"When the application starts, ",(0,o.kt)("strong",{parentName:"p"},"Oneki.js")," creates automatically a Redux store (or you can provide your own) and provides the following hooks to manipulate the global state:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"#useglobalprop"},"useGlobalProp"))," is a generic global service equivalent to the standard ",(0,o.kt)("strong",{parentName:"li"},"useState")," from React, but for the global state. It retrieves a specific data from the global state and provide a setter to upate it."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"#useglobalstate"},"useGlobalState"))," to retrieve and react on data from the global state using a selector"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"#useglobalstateservice"},"useGlobalStateService"))," is a generic global service to update any data in the global state")),(0,o.kt)("h2",{id:"useglobalprop"},"useGlobalProp"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Oneki.js")," provide the hook ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"useGlobalProp"))," to retrieve a specific data from the global state. Each time the data is updated in the global state, the component is re-rendered."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"useGlobalState"))," is similar to the standard ",(0,o.kt)("strong",{parentName:"p"},"useState")," from React, but for the global state. It retrieves a specific data from the global state and provide a setter to upate it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const [prop, setProp] = useGlobalProp(key, defaultValue);\n")),(0,o.kt)("h3",{id:"parameters"},"Parameters"),(0,o.kt)("h4",{id:"inputs"},"Inputs"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// [Mandatory] The key identifies an entry in the global state\n// if the global state is the following\n// {\n//   key1: "value1",\n//   key2: {\n//     "key 3": "value3"\n//   },\n//   "key4": [{\n//     key5: "value5\n//   }] \n// }\n// These keys are valid: "key1", "key2", "key2.key 3", "key4.0.key5"\nkey: string\n\n// [Optional] This value is returned if the entry is not found in the state\ndefautValue: any \n')),(0,o.kt)("h4",{id:"outputs"},"Outputs"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// The result is the value of the entry identified by the key\nprop: any\n\n// A function to update the value in the global state identified by the key\nsetProp: function(newValue)\n")),(0,o.kt)("h2",{id:"useglobalstate"},"useGlobalState"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Oneki.js")," provide the hook ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"useGlobalState"))," to retrieve data from the global state. Each time the data matching the selector is updated in the global state, the component is re-rendered."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"useGlobalState"))," is similar to ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"useSelector"))," from ",(0,o.kt)("strong",{parentName:"p"},"React Redux")," but is tailored to be used with a Redux Store built by Oneki.js",(0,o.kt)("br",null)),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Be sure to read the documentation of ",(0,o.kt)("a",{parentName:"p",href:"https://redux.js.org/"},"Redux")," to understand exactly how it works.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const globalState = useGlobalState(selector, equalityFn);\n")),(0,o.kt)("h3",{id:"parameters-1"},"Parameters"),(0,o.kt)("h4",{id:"inputs-1"},"Inputs"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// [Optional] selector is a function returning a subset of the state\n// default: (state) => state\nselector: function(state): any\n\n// [Optional] a function to compare the previous and next value\n// If the function returns true, it means the two values are equals\n// By default, Oneki.js compare the two values like this:\n// - If item and previousItem are immer object, it does a '==='\n// - otherwise, it does a shallow compare\nequalifyFn: function(item, previousItem): boolean\n")),(0,o.kt)("h4",{id:"outputs-1"},"Outputs"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// A subset of the global state\nglobalState: any\n")),(0,o.kt)("h2",{id:"useglobalstateservice"},"useGlobalStateService"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Oneki.js")," provides a generic global service to update any data in the global state. This service is a singleton and each invocation of the hook returns the same instance."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const service = useGlobalStateService();\n")),(0,o.kt)("p",null,"The service returned has the following methods:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// Method to update a specific entry in the global state\nsetProp: function(key, value)\n\n// Delete a specific entry in the global state\ndeleteProp: function(key)\n")),(0,o.kt)("h2",{id:"examples"},"Examples"),(0,o.kt)("p",null,"TODO"))}m.isMDXComponent=!0},6010:function(e,t,a){function n(e){var t,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=n(e[t]))&&(r&&(r+=" "),r+=a);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,a=0,r="";a<arguments.length;)(e=arguments[a++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}a.d(t,{Z:function(){return r}})}}]);