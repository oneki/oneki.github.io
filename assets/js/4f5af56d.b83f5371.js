"use strict";(self.webpackChunkoneki_js=self.webpackChunkoneki_js||[]).push([[22387],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return f}});var r=n(67294),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=a().createContext({}),c=function(e){var t=a().useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=c(e.components);return a().createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a().createElement(a().Fragment,{},t)}},m=a().forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,f=d["".concat(o,".").concat(m)]||d[m]||p[m]||i;return n?a().createElement(f,s(s({ref:t},u),{},{components:n})):a().createElement(f,s({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var u=2;u<i;u++)o[u]=n[u];return a().createElement.apply(null,o)}return a().createElement.apply(null,n)}m.displayName="MDXCreateElement"},13919:function(e,t,n){function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function a(e){return void 0!==e&&!r(e)}n.d(t,{b:function(){return r},Z:function(){return a}})},44996:function(e,t,n){n.d(t,{C:function(){return i},Z:function(){return o}});var r=n(52263),a=n(13919);function i(){var e=(0,r.Z)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,i=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,r){var i=void 0===r?{}:r,o=i.forcePrependBaseUrl,s=void 0!==o&&o,l=i.absolute,u=void 0!==l&&l;if(!n)return n;if(n.startsWith("#"))return n;if((0,a.b)(n))return n;if(s)return t+n;var c=n.startsWith(t)?n:t+n.replace(/^\//,"");return u?e+c:c}(i,n,e,t)}}}function o(e,t){return void 0===t&&(t={}),(0,i().withBaseUrl)(e,t)}},58215:function(e,t,n){var r=n(67294),a=n.n(r);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a().createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},26396:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(83117),a=n(67294),i=n.n(a),o=n(72389),s=n(79443);var l=function(){var e=(0,a.useContext)(s.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},u=n(89521),c=n(86010),d="tabItem_1uMI";function p(e){var t,n,r,o=e.lazy,s=e.block,p=e.defaultValue,m=e.values,f=e.groupId,v=e.className,h=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=m?m:h.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),b=(0,u.lx)(g,(function(e,t){return e.value===t.value}));if(b.length>0)throw new Error('Docusaurus error: Duplicate values "'+b.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var k=null===p?p:null!=(t=null!=p?p:null==(n=h.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(r=h[0])?void 0:r.props.value;if(null!==k&&!g.some((function(e){return e.value===k})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var y=l(),w=y.tabGroupChoices,x=y.setTabGroupChoices,N=(0,a.useState)(k),T=N[0],j=N[1],C=[],O=(0,u.o5)().blockElementScrollPositionUntilNextRender;if(null!=f){var E=w[f];null!=E&&E!==T&&g.some((function(e){return e.value===E}))&&j(E)}var Z=function(e){var t=e.currentTarget,n=C.indexOf(t),r=g[n].value;r!==T&&(O(t),j(r),null!=f&&x(f,r))},I=function(e){var t,n=null;switch(e.key){case"ArrowRight":var r=C.indexOf(e.currentTarget)+1;n=C[r]||C[0];break;case"ArrowLeft":var a=C.indexOf(e.currentTarget)-1;n=C[a]||C[C.length-1]}null==(t=n)||t.focus()};return i().createElement("div",{className:"tabs-container"},i().createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.Z)("tabs",{"tabs--block":s},v)},g.map((function(e){var t=e.value,n=e.label;return i().createElement("li",{role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,className:(0,c.Z)("tabs__item",d,{"tabs__item--active":T===t}),key:t,ref:function(e){return C.push(e)},onKeyDown:I,onFocus:Z,onClick:Z},null!=n?n:t)}))),o?(0,a.cloneElement)(h.filter((function(e){return e.props.value===T}))[0],{className:"margin-vert--md"}):i().createElement("div",{className:"margin-vert--md"},h.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function m(e){var t=(0,o.Z)();return i().createElement(p,(0,r.Z)({key:String(t)},e))}},79443:function(e,t,n){var r=n(67294),a=(0,r.createContext)(void 0);t.Z=a},64094:function(e,t,n){var r=n(67294),a=n.n(r),i=n(26396);n(58215);t.Z=function(e){var t=e.children;return console.log("children",t),a().createElement(i.Z,{groupId:"application-types",defaultValue:"cra",values:[{label:"Create React App",value:"cra"},{label:"Nextjs App",value:"next"}]},t)}},32779:function(e,t,n){var r=n(67294),a=n.n(r);t.Z=function(e){var t=e.name,n=e.height,r=void 0===n?500:n,i=e.modules,o=e.branch,s=void 0===o?"master":o,l=e.type,u=void 0===l?"examples":l,c=e.view,d="https://codesandbox.io/embed/github/oneki/onekijs/tree/"+s+"/"+u+"/"+t+"?codemirror=1&fontsize=14&theme=dark&view="+(void 0===c?"editor":c);i&&(d+="&module=",i.forEach((function(e,t){t>0&&(d+=","),d+=e})));var p="onekijs-"+t.split("/").join("-");return a().createElement("iframe",{src:d,style:{width:"100%",height:r+"px",border:0,bordeRadius:"4px",overflow:"hidden"},title:p,allow:"geolocation; microphone; camera; midi; accelerometer; gyroscope; payment; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"})}},27212:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return d},metadata:function(){return p},toc:function(){return m},default:function(){return v}});var r=n(83117),a=n(80102),i=(n(67294),n(3905)),o=(n(44996),n(64094)),s=n(58215),l=n(32779),u=["components"],c={id:"form",title:"Using form for user input",sidebar_label:"Using form for user input"},d=void 0,p={unversionedId:"getting-started/form",id:"getting-started/form",isDocsHomePage:!1,title:"Using form for user input",description:"This step consists in introducing how to build form with Oneki.js",source:"@site/docs/getting-started/010_form.md",sourceDirName:"getting-started",slug:"/getting-started/form",permalink:"/docs/getting-started/form",editUrl:"https://github.com/oneki/oneki.github.io/edit/source/docs/getting-started/010_form.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{id:"form",title:"Using form for user input",sidebar_label:"Using form for user input"},sidebar:"someSidebar",previous:{title:"Internationalization",permalink:"/docs/getting-started/i18n"},next:{title:"Adding a service",permalink:"/docs/getting-started/service"}},m=[{value:"Final result",id:"final-result",children:[],level:2},{value:"Adding validation",id:"adding-validation",children:[],level:2},{value:"Adding a signup page",id:"adding-a-signup-page",children:[],level:2},{value:"Next step",id:"next-step",children:[],level:2}],f={toc:m};function v(e){var t=e.components,n=(0,a.Z)(e,u);return(0,i.kt)("wrapper",(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This step consists in introducing how to build form with Oneki.js"),(0,i.kt)("p",null,"Building forms with React requires a lot of code and can be difficult to maintain.",(0,i.kt)("br",null),"\nOneki.js offers a library to control a form and drastically reduce the code."),(0,i.kt)("h2",{id:"final-result"},"Final result"),(0,i.kt)("p",null,"The result of this step is as follows:"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"New in this step")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The login page now validates that the username and password are filled in."),(0,i.kt)("p",{parentName:"div"},"A new page is added for registration. The form on the registration page asynchronously checks wether the username is available or not",(0,i.kt)("br",null),"\nSome elements of the form are displayed or not depending on the value of a field"))),(0,i.kt)(o.Z,{mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"cra",mdxType:"TabItem"},(0,i.kt)(l.Z,{name:"step09-form",type:"getting-started/cra",view:"preview",height:"600",modules:["/src/index.tsx","/src/pages/products/index.tsx"],mdxType:"Sandbox"})),(0,i.kt)(s.Z,{value:"next",mdxType:"TabItem"},(0,i.kt)(l.Z,{name:"step09-form",type:"getting-started/next",view:"preview",height:"600",modules:["/src/pages/index.tsx","/src/pages/_app.tsx"],mdxType:"Sandbox"}))),(0,i.kt)("h2",{id:"adding-validation"},"Adding validation"),(0,i.kt)("p",null,"Let's update the login page to verify that the username and password are filled in and that the username contains only alphanumeric charaters (max size 20)",(0,i.kt)("br",null),'\nThe value of the form is updated every time the user enters a caracter. At the bottom of the form, We add a "debug" component to display the value of the form in real time',(0,i.kt)("br",null),"\nThis real-time update also allows to have a real time validation."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"We use the component ",(0,i.kt)("inlineCode",{parentName:"p"},"<Input />")," from Oneki.js. This component is a wrapper of ",(0,i.kt)("inlineCode",{parentName:"p"},"<input>")," that can interact with a ",(0,i.kt)("inlineCode",{parentName:"p"},"FormContext")," created by ",(0,i.kt)("inlineCode",{parentName:"p"},"useForm")))),(0,i.kt)(o.Z,{mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"cra",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/oneki/onekijs/blob/master/getting-started/cra/step09-form/src/pages/login.tsx\n"))),(0,i.kt)(s.Z,{value:"next",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/oneki/onekijs/blob/master/getting-started/next/step09-form/src/pages/login.tsx\n")))),(0,i.kt)("h2",{id:"adding-a-signup-page"},"Adding a signup page"),(0,i.kt)("p",null,"To introduce more functionality provided by the form library, let's build the registration page.",(0,i.kt)("br",null),"\nThe registration page is similar to the login page, except that we don't use ",(0,i.kt)("inlineCode",{parentName:"p"},"useLogin")," but a ",(0,i.kt)("inlineCode",{parentName:"p"},"usePost")," to build the submit function"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Two new hooks are introduced in the code below:"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"useAuthService"),": a service used internally by ",(0,i.kt)("inlineCode",{parentName:"li"},"useLogin")," that provides a method to set the security context."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"useRouter"),": a simple hook to give access to the router. This is useful to redirect the user to another page"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"useRule"),":  a hook that reacts to a value change and executes some logic")))),(0,i.kt)("p",null,"If you register twice with the same username, the server returns an error.",(0,i.kt)("br",null),"\nWe want to improve the user experience and let the user know that the username already exists as soon as they fill it in."),(0,i.kt)("p",null,"Let's add a rule (by adding a ",(0,i.kt)("inlineCode",{parentName:"p"},"useRule"),") to verify if the username already exists or not by sending an AJAX request to the server"),(0,i.kt)(o.Z,{mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"cra",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/oneki/onekijs/blob/master/getting-started/cra/step09-form/src/pages/signup.tsx\n")),(0,i.kt)("p",null,"The router is updated to add a route for this page"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/oneki/onekijs/blob/master/getting-started/cra/step09-form/src/pages/_router.tsx\n"))),(0,i.kt)(s.Z,{value:"next",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"reference",reference:!0},"https://github.com/oneki/onekijs/blob/master/getting-started/next/step09-form/src/pages/signup.tsx\n")))),(0,i.kt)("h2",{id:"next-step"},"Next step"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"service"},"In the next step")),", we introduce the concept of services which allow to add complex logic to the application."))}v.isMDXComponent=!0}}]);