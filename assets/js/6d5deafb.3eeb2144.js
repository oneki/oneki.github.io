"use strict";(self.webpackChunkonekijs_website=self.webpackChunkonekijs_website||[]).push([[27105],{85162:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(67294),i=t.n(a),r=t(86010),o="tabItem_Ymn6";function l(e){var n=e.children,t=e.hidden,a=e.className;return i().createElement("div",{role:"tabpanel",className:(0,r.Z)(o,a),hidden:t},n)}},65488:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(87462),i=t(67294),r=t.n(i),o=t(86010),l=t(72389),s=t(67392),c=t(7094),u=t(12466),p="tabList__CuJ",d="tabItem_LNqP";function h(e){var n,t,l=e.lazy,h=e.block,m=e.defaultValue,g=e.values,k=e.groupId,f=e.className,v=r().Children.map(e.children,(function(e){if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),b=null!=g?g:v.map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes}})),T=(0,s.l)(b,(function(e,n){return e.value===n.value}));if(T.length>0)throw new Error('Docusaurus error: Duplicate values "'+T.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===m?m:null!=(n=null!=m?m:null==(t=v.find((function(e){return e.props.default})))?void 0:t.props.value)?n:v[0].props.value;if(null!==y&&!b.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+b.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var N=(0,c.U)(),x=N.tabGroupChoices,w=N.setTabGroupChoices,C=(0,i.useState)(y),I=C[0],E=C[1],j=[],P=(0,u.o5)().blockElementScrollPositionUntilNextRender;if(null!=k){var S=x[k];null!=S&&S!==I&&b.some((function(e){return e.value===S}))&&E(S)}var L=function(e){var n=e.currentTarget,t=j.indexOf(n),a=b[t].value;a!==I&&(P(n),E(a),null!=k&&w(k,String(a)))},A=function(e){var n,t=null;switch(e.key){case"ArrowRight":var a,i=j.indexOf(e.currentTarget)+1;t=null!=(a=j[i])?a:j[0];break;case"ArrowLeft":var r,o=j.indexOf(e.currentTarget)-1;t=null!=(r=j[o])?r:j[j.length-1]}null==(n=t)||n.focus()};return r().createElement("div",{className:(0,o.Z)("tabs-container",p)},r().createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":h},f)},b.map((function(e){var n=e.value,t=e.label,i=e.attributes;return r().createElement("li",(0,a.Z)({role:"tab",tabIndex:I===n?0:-1,"aria-selected":I===n,key:n,ref:function(e){return j.push(e)},onKeyDown:A,onFocus:L,onClick:L},i,{className:(0,o.Z)("tabs__item",d,null==i?void 0:i.className,{"tabs__item--active":I===n})}),null!=t?t:n)}))),l?(0,i.cloneElement)(v.filter((function(e){return e.props.value===I}))[0],{className:"margin-top--md"}):r().createElement("div",{className:"margin-top--md"},v.map((function(e,n){return(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==I})}))))}function m(e){var n=(0,l.Z)();return r().createElement(h,(0,a.Z)({key:String(n)},e))}},64094:function(e,n,t){var a=t(67294),i=t.n(a),r=t(65488);t(85162);n.Z=function(e){var n=e.children;return console.log("children",n),i().createElement(r.Z,{groupId:"application-types",defaultValue:"cra",values:[{label:"Create React App",value:"cra"},{label:"Nextjs App",value:"next"}]},n)}},20819:function(e,n,t){t.d(n,{b4:function(){return c}});var a=t(67294),i=t.n(a),r=t(64094),o=t(85162),l=t(95665),s=t.n(l),c=function(e){var n=e.path,t=e.craPath,a=e.nextPath,l=e.branch,c=void 0===l?"react18":l;return i().createElement(r.Z,null,i().createElement(o.Z,{value:"cra"},i().createElement(s(),{language:"tsx"},"https://github.com/oneki/onekijs/blob/"+c+"/getting-started/cra"+(t||n)+"\n")),i().createElement(o.Z,{value:"next"},i().createElement(s(),{language:"tsx"},"https://github.com/oneki/onekijs/blob/"+c+"/getting-started/next"+(a||n)+"\n")))}},32779:function(e,n,t){t.d(n,{YK:function(){return s},g0:function(){return c}});var a=t(67294),i=t.n(a),r=t(64094),o=t(85162),l=function(e){var n=e.name,t=e.height,a=void 0===t?500:t,r=e.modules,o=e.branch,l=void 0===o?"master":o,s=e.type,c=void 0===s?"examples":s,u=e.view,p="https://codesandbox.io/embed/github/oneki/onekijs/tree/"+l+"/"+c+"/"+n+"?codemirror=1&fontsize=14&theme=dark&view="+(void 0===u?"editor":u);r&&(p+="&module=",r.forEach((function(e,n){n>0&&(p+=","),p+=e})));var d="onekijs-"+n.split("/").join("-");return i().createElement("iframe",{src:p,style:{width:"100%",height:a+"px",border:0,bordeRadius:"4px",overflow:"hidden"},title:d,allow:"geolocation; microphone; camera; midi; accelerometer; gyroscope; payment; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"})},s=function(e){var n=e.name;return i().createElement("div",{style:{textAlign:"right"}},i().createElement("a",{href:"https://codesandbox.io/s/github/oneki/onekijs/tree/master/examples/"+n,target:"_blank",style:{display:"inline-flex",alignItems:"center",height:"32px",padding:"0px 12px",fontSize:"13px",fontWeight:500,color:"rgb(255, 255, 255)",backgroundColor:"#2196f3",borderRadius:"4px",textDecoration:"none",cursor:"pointer",marginBottom:"2px"}},"Open in Codesandbox"))},c=function(e){var n=e.name,t=e.modules,a=e.craName,s=e.craModules,c=e.nextName,u=e.nextModules,p=e.height,d=void 0===p?600:p,h=e.branch,m=void 0===h?"master":h;return i().createElement(r.Z,null,i().createElement(o.Z,{value:"cra"},i().createElement(l,{name:a||n,type:"getting-started/cra",view:"preview",branch:m,height:d,modules:s||t})),i().createElement(o.Z,{value:"next"},i().createElement(l,{name:c||n,type:"getting-started/next",view:"preview",branch:m,height:d,modules:u||t})))};n.ZP=l},85191:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return u},default:function(){return g},frontMatter:function(){return c},metadata:function(){return p},toc:function(){return h}});var a=t(87462),i=t(63366),r=(t(67294),t(3905)),o=(t(44996),t(64094),t(85162),t(32779)),l=t(20819),s=["components"],c={id:"i18n",title:"Internationalization (i18n)",sidebar_label:"Internationalization"},u=void 0,p={unversionedId:"getting-started/i18n",id:"getting-started/i18n",title:"Internationalization (i18n)",description:"",source:"@site/docs/getting-started/009_i18n.md",sourceDirName:"getting-started",slug:"/getting-started/i18n",permalink:"/docs/getting-started/i18n",draft:!1,editUrl:"https://github.com/oneki/oneki.github.io/edit/source/docs/getting-started/009_i18n.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{id:"i18n",title:"Internationalization (i18n)",sidebar_label:"Internationalization"},sidebar:"someSidebar",previous:{title:"Handling errors",permalink:"/docs/getting-started/error-handling"},next:{title:"Using form for user input",permalink:"/docs/getting-started/form"}},d={},h=[{value:"Final result",id:"final-result",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Translations",id:"translations",level:2},{value:"Translation files",id:"translation-files",level:3},{value:"English",id:"english",level:4},{value:"French",id:"french",level:4},{value:"Update of the application",id:"update-of-the-application",level:2},{value:"useTranslation hook",id:"usetranslation-hook",level:3},{value:"useI18nService hook",id:"usei18nservice-hook",level:3},{value:"Advanced use cases",id:"advanced-use-cases",level:2},{value:"Complex string",id:"complex-string",level:3},{value:"Plural and variables",id:"plural-and-variables",level:3},{value:"Next step",id:"next-step",level:2}],m={toc:h};function g(e){var n=e.components,t=(0,i.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This step consists in proposing the website in several languages."),(0,r.kt)("h2",{id:"final-result"},"Final result"),(0,r.kt)("p",null,"The result of this step is as follows:"),(0,r.kt)("admonition",{title:"New in this step",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The website is now available in English and French. You can change the language via a link in the navivation bar",(0,r.kt)("br",null),'\nPlease note the text "item" on the Cart page which is more complex to handle (styling + plural)')),(0,r.kt)(o.g0,{name:"step08-i18n",craModules:["/src/index.tsx","/src/pages/products/index.tsx"],nextModules:["/src/pages/index.tsx","/src/pages/_app.tsx"],mdxType:"GettingStartedSandbox"}),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"You specify the languages supported by the website via the configuration file ",(0,r.kt)("inlineCode",{parentName:"p"},"src/settings.ts"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/settings.ts"',title:'"src/settings.ts"'},"export default {\n  i18n: {\n    locales: [\n      {\n        locale: 'en',\n        path: '/en',\n      },\n      {\n        locale: 'fr',\n        path: '/fr',\n      },\n    ],\n    defaultLocale: 'en',\n  },\n  ...\n} as AppSettings;\n")),(0,r.kt)("h2",{id:"translations"},"Translations"),(0,r.kt)("p",null,"The translations are stored in the folders ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"public/locales/{locale}/{namespace}.json"))," (in JSON format)"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"onekijs"))," supports splitting translations into multiple files that are called namespaces."),(0,r.kt)("p",{parentName:"admonition"},"By convention, the default namespace is named ",(0,r.kt)("strong",{parentName:"p"},"common")," and is automatically loaded.",(0,r.kt)("br",null),"\nIt's a good practice to put everything that is common to the whole application in this file (e.g: the text in the navigation bar).",(0,r.kt)("br",null),"\nFor small applications, it's common to put all translations only in this file.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"My-App\n\u251c\u2500 public\n\u2502  \u251c\u2500 locales\n\u2502  \u2502  \u2514\u2500 en\n\u2502  \u2502  \u2502  \u2514\u2500 common.json // locales in english\n\u2502  \u2502  \u2514\u2500 fr\n\u2502  \u2502  \u2502  \u2514\u2500 common.json // locales in french \n")),(0,r.kt)("h3",{id:"translation-files"},"Translation files"),(0,r.kt)("p",null,"Let's create these translation files for our application"),(0,r.kt)("h4",{id:"english"},"English"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="public/locales/en/common.json"',title:'"public/locales/en/common.json"'},'{\n  "Phone XL": "Phone XL",\n  "Phone Mini": "Phone Mini",\n  "Phone Invalid": "Phone Invalid",\n  "A large phone with one of the best screens": "A large phone with one of the best screens",\n  "A great phone with one of the best cameras": "A great phone with one of the best cameras",\n  "The product has been shared!": "The product has been shared!",\n  "You will be notified when the product goes on sale": "You will be notified when the product goes on sale",\n  "Product added succesfully to the cart!": "Product added succesfully to the cart!",\n  "Notify me": "Notify me",\n  "Share": "Share",\n  "Description": "Description",\n  "Product Details": "Product Details",\n  "Buy": "Buy",\n  "Loading": "Loading",\n  "Empty the cart": "Empty the cart",\n  "An error occured while cleaning the cart": "An error occured while cleaning the cart",\n  "There is no item in the shopping cart !": "There is no item in the shopping cart !",\n  "Buy another products": "Buy another products",\n  "Use any username / password (no check performed)": "Use any username / password (no check performed)",\n  "Username": "Username",\n  "Password": "Password",\n  "Submit": "Submit",\n  "Submitting": "Submitting",\n  "Error": "Error",\n  "Logging out": "Logging out",\n  "An error occured": "An error occured",\n  "stacktrace": "stacktrace",\n  "My Store": "My Store",\n  "Log out": "Log out",\n  "Checkout": "Checkout"\n}\n')),(0,r.kt)("h4",{id:"french"},"French"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="public/locales/fr/common.json"',title:'"public/locales/fr/common.json"'},'{\n  "Phone XL": "T\xe9l\xe9phone XL",\n  "Phone Mini": "T\xe9l\xe9phone Mini",\n  "Phone Invalid": "T\xe9l\xe9phone Invalide",\n  "A large phone with one of the best screens": "Un grand t\xe9l\xe9phone avec l\'un des meilleurs \xe9cran",\n  "A great phone with one of the best cameras": "Un bon t\xe9l\xe9phone avec l\'un des meilleurs appareil photo",\n  "The product has been shared!": "Ce produit a \xe9t\xe9 partag\xe9!",\n  "You will be notified when the product goes on sale": "Vous serez notifi\xe9 quand le produit sera disponible \xe0 la vente",\n  "Product added succesfully to the cart!": "Le produit a \xe9t\xe9 ajout\xe9 au panier avec succ\xe8s!",\n  "Notify me": "Me notifier",\n  "Share": "Partager",\n  "Description": "Description",\n  "Product Details": "D\xe9tails du produit",\n  "Buy": "Acheter",\n  "Loading": "Chargement",\n  "Empty the cart": "Vider le panier",\n  "An error occured while cleaning the cart": "Une erreur est survenue pendant le nettoyage du panier",\n  "There is no item in the shopping cart !": "Il n\'y a aucun \xe9l\xe9ments dans le panier !",\n  "Buy another products": "Acheter d\'autres produits",\n  "Use any username / password (no check performed)": "Utilisez n\'importe quel identifiant / mot de passe (pas de check effectu\xe9)",\n  "Username": "Identifiant",\n  "Password": "Mot de passe",\n  "Submit": "Envoyer",\n  "Submitting": "Envoi",\n  "Error": "Erreur",\n  "Logging out": "D\xe9connexion",\n  "An error occured": "Une erreur est survenue",\n  "stacktrace": "stacktrace",\n  "My Store": "Mon Magasin",\n  "Log out": "D\xe9connexion",\n  "Checkout": "Panier"\n}\n')),(0,r.kt)("h2",{id:"update-of-the-application"},"Update of the application"),(0,r.kt)("h3",{id:"usetranslation-hook"},"useTranslation hook"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"To display a string (or even a component) in the right locale, ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"onekijs"))," offers the ",(0,r.kt)("inlineCode",{parentName:"p"},"useTranslation")," hook. This hook returns "),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"a component ",(0,r.kt)("inlineCode",{parentName:"li"},"<T />")," to translate something inside a JSX"),(0,r.kt)("li",{parentName:"ul"},"a function ",(0,r.kt)("inlineCode",{parentName:"li"},"t()")," to translate a typescript string"))),(0,r.kt)("p",null,"It often happens that the element to be translated is not a simple string."),(0,r.kt)("p",null,"Let's update the Cart page to use this hook and complexe string to be translated"),(0,r.kt)(l.b4,{path:"/step08-i18n/src/pages/cart.tsx",mdxType:"GettingStartedSnippet"}),(0,r.kt)("h3",{id:"usei18nservice-hook"},"useI18nService hook"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"onekijs"))," offers a service providing some i18n related helper methods like switching between locales.",(0,r.kt)("br",null),"\nThe service can be instancied via the ",(0,r.kt)("inlineCode",{parentName:"p"},"useI18nService")," hook."),(0,r.kt)("p",{parentName:"admonition"},"Also note that the ",(0,r.kt)("inlineCode",{parentName:"p"},"useTranslation")," hook returns the active locale as the third parameter.")),(0,r.kt)("p",null,"Let's add a link to the ",(0,r.kt)("inlineCode",{parentName:"p"},"<Navbar />")," component to select the appropriate locale (English or French) and to hightlight the active one."),(0,r.kt)(l.b4,{path:"/step08-i18n/src/modules/core/components/Navbar.tsx",mdxType:"GettingStartedSnippet"}),(0,r.kt)("p",null,"Now a user can display the application in english or in french"),(0,r.kt)("h2",{id:"advanced-use-cases"},"Advanced use cases"),(0,r.kt)("h3",{id:"complex-string"},"Complex string"),(0,r.kt)("p",null,"It often happens that the element to be translated is not a simple string. To illustrate this, let's update the Cart component like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'{22} title="src/modules/core/components/Cart.tsx"',"{22}":!0,title:'"src/modules/core/components/Cart.tsx"'},'const Cart: FC<CartOptions> = ({ cart }) => {\n  const [T] = useTranslation();\n  return (\n    <div>\n      <h3>\n        <T>Cart</T>\n      </h3>\n\n      {cart.products.map((item, index) => (\n        <div key={`item-${index}`} className="cart-item">\n          <span>\n            <T>{item.name}</T>\n          </span>\n          <span>\n            <T>{currency(item.price)}</T>\n          </span>\n        </div>\n      ))}\n      {cart.products.length === 0 && (\n        <h4>\n          <T>\n            There is <u>no item</u> in the shopping cart !\n          </T>\n        </h4>\n      )}\n      <p>\n        <Link href="/products">\n          <T>Buy another products</T>\n        </Link>\n      </p>\n    </div>\n  );\n};\n\nexport default Cart;\n')),(0,r.kt)("p",null),"The key ",(0,r.kt)("code",null,"There is no item in the shopping cart !")," in locales/en/common.json is no more valid. To become valid, the key must be upated like this:",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'{3} title="locales/en/common.json"',"{3}":!0,title:'"locales/en/common.json"'},'{\n  ...\n  "There is <1>no item</1> in the shopping cart !": "There is <1>no item</1> in the shopping cart !",\n  ...\n}\n')),(0,r.kt)("p",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'{3} title="locales/fr/common.json"',"{3}":!0,title:'"locales/fr/common.json"'},'{\n  ...\n  "There is <1>no item</1> in the shopping cart !": "Il n\'y a <1>aucun \xe9l\xe9ments</1> dans le panier !",\n  ...\n}\n')),(0,r.kt)("h3",{id:"plural-and-variables"},"Plural and variables"),(0,r.kt)("p",null,"Plurals are essential when dealing with internationalization.",(0,r.kt)("br",null),"\nLet's update the ",(0,r.kt)("inlineCode",{parentName:"p"},"Cart")," component to add a plural and also a variable"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'{27-33} title="src/modules/core/components/Cart.tsx"',"{27-33}":!0,title:'"src/modules/core/components/Cart.tsx"'},'const Cart: FC<CartOptions> = ({ cart }) => {\n  const nbItems = cart.products.length;\n  const [T] = useTranslation();\n  return (\n    <div>\n      <h3>\n        <T>Cart</T>\n      </h3>\n\n      {cart.products.map((item, index) => (\n        <div key={`item-${index}`} className="cart-item">\n          <span>\n            <T>{item.name}</T>\n          </span>\n          <span>\n            <T>{currency(item.price)}</T>\n          </span>\n        </div>\n      ))}\n      {nbItems === 0 && (\n        <h4>\n          <T>\n            There is <u>no item</u> in the shopping cart !\n          </T>\n        </h4>\n      )}\n      {nbItems > 0 && (\n        <h4>\n          <T count={nbItems}>\n            There is <u>{{ nbItems }} item</u> in the shopping cart !\n          </T>\n        </h4>\n      )}\n      <p>\n        <Link href="/products">\n          <T>Buy another products</T>\n        </Link>\n      </p>\n    </div>\n  );\n};\n\nexport default Cart;\n')),(0,r.kt)("p",null,"Update the translation file to support plural:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="locales/en/common.json"',title:'"locales/en/common.json"'},'{\n  ...\n  "There is <1>{{nbItems}} item</1> in the shopping cart !": "There is <1>{{nbItems}} item</1> in the shopping cart !",\n  "plural::There is <1>{{nbItems}} item</1> in the shopping cart !": "There are <1>{{nbItems}} items</1> in the shopping cart !",\n  ...\n}\n')),(0,r.kt)("p",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="locales/fr/common.json"',title:'"locales/fr/common.json"'},'{\n  ...\n  "There is <1>{{nbItems}} item</1> in the shopping cart !": "Il y a <1>{{nbItems}} \xe9lement</1> in the shopping cart !",\n  "plural::There is <1>{{nbItems}} item</1> in the shopping cart !": "Il y a <1>{{nbItems}} \xe9l\xe9ments</1> in the shopping cart !",\n  ...\n}\n')),(0,r.kt)("p",null,"The following text is displayed if there is one element in the cart:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"There is 1 item in the shopping cart !"))),(0,r.kt)("p",null,"The following text is displayed if there are two or more elements in the cart:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"There are 2 items in the shopping cart !"))),(0,r.kt)("h2",{id:"next-step"},"Next step"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"form"},"In the next step")),", we present how to build powerful forms with ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"onekijs")),"."))}g.isMDXComponent=!0}}]);